---
import { siteConfig } from "../config";
const formEndpoint = `https://formsubmit.co/ajax/${encodeURIComponent(
  siteConfig.social.email
)}?formOrigin=portfolio`;
---

<section id="contact" class="p-8 sm:p-12 md:p-16 lg:p-24">
  <div class="space-y-10">
    <div class="max-w-3xl">
      <h2 class="text-3xl sm:text-4xl md:text-5xl xl:text-7xl font-bold text-gray-900">
        Contact
      </h2>
      <div
        class="w-[75px] h-[5px] mt-2 rounded-full"
        style={`background-color: ${siteConfig.accentColor}`}
      />
    </div>

    <div class="space-y-8">
      <p class="text-lg sm:text-xl md:text-2xl leading-relaxed text-gray-600">
        Feel free to reach out.
      </p>
      
      <form
        id="contact-form"
        action={formEndpoint}
        method="POST"
        class="space-y-4"
      >
        <input
          type="text"
          name="name"
          placeholder="Name"
          required
          class="w-full p-3 border border-gray-300 rounded-lg"
        />
        <input
          type="email"
          name="email"
          placeholder="Email"
          required
          class="w-full p-3 border border-gray-300 rounded-lg"
        />
        <textarea
          name="message"
          placeholder="Message"
          required
          class="w-full p-3 border border-gray-300 rounded-lg"
        />
        <button
          type="submit"
          class="px-6 py-3 text-lg font-medium text-white rounded-lg"
          style={`background-color: ${siteConfig.accentColor}`}
        >
          Send Message
        </button>
      </form>
      <p id="form-status" class="text-sm text-gray-600"></p>
    </div>
  </div>
</section>

<script>
  const form = document.getElementById("contact-form");
  const status = document.getElementById("form-status");
  form?.addEventListener("submit", async (e) => {
    e.preventDefault();
    const data = new FormData(form);
    status.textContent = "Sending...";
    try {
      const res = await fetch(form.action, {
        method: "POST",
        body: data,
        headers: { Accept: "application/json" },
      });
      if (res.ok) {
        status.textContent = "Message sent successfully!";
        form.reset();
      } else {
        status.textContent = "Failed to send message.";
      }
    } catch (err) {
      status.textContent = "Failed to send message.";
    }
  });
</script>
